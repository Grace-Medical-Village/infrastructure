AWSTemplateFormatVersion: '2010-09-09'

Parameters:
  ApiCertificateArn:
    AllowedValues:
      - arn:aws:acm:us-east-1:435765244332:certificate/779f6a51-049f-466c-9a86-960e21c0453b
      - TODO
    Type: String
  DomainName:
    AllowedValues:
      - gracemedicalvillagedev.com
      - gracemedicalvillage.com
    Type: String
  RestApiId:
    AllowedValues:
      - tb62ntz7g2
      - TODO
    Type: String

Resources:
  ApiDomain:
    Type: AWS::ApiGateway::DomainName
    Properties:
      CertificateArn: !Ref ApiCertificateArn
      DomainName: !Sub 'api.${DomainName}'
      SecurityPolicy: TLS_1_2

  GatewayResponseDefault4XX:
    Type: AWS::ApiGateway::GatewayResponse
    Properties:
      ResponseParameters:
        gatewayresponse.header.Access-Control-Allow-Origin: "'*'"
        gatewayresponse.header.Access-Control-Allow-Headers: "'*'"
      ResponseType: DEFAULT_4XX
      RestApiId: !Ref RestApiId

Outputs:
  ApiDomain:
    Value: !Ref ApiDomain
